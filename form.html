<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>FESH - Field Evaluation of Soil Health</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      padding: 20px;
    }
    .step {
      display: none;
      background: #fff;
      padding: 20px;
      margin-top: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .step.active {
      display: block;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    input, select, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button {
      margin-top: 15px;
      padding: 10px 20px;
      border: none;
      background: #28a745;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }
    .step-header {
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
    }
    .step-box {
      padding: 10px 15px;
      background-color: #4caf50;
      border-radius: 10px;
      font-weight: bold;
      color: white;
      cursor: default;
    }
    .step-box.active {
      background-color: #388e3c;
    }
  </style>
</head>
<body>
  <h2>FESH - Field Evaluation of Soil Health</h2>
  <div class="step-header">
    <div class="step-box active" id="header-step1">Step 1: General Info</div>
    <div class="step-box" id="header-step2">Step 2: Crop Info</div>
    <div class="step-box" id="header-step3">Step 3: Topography</div>
    <div class="step-box" id="header-step4">Step 4: Physical Soil</div>
    <div class="step-box" id="header-step5">Step 5: Chemical Soil</div>
    <div class="step-box" id="header-step6">Step 6: Biological Soil</div>
    <div class="step-box" id="header-step7">Step 7: Crop Yield</div>
  </div>

  <form id="feshForm">
    <div class="step active" id="step1">
      <h3>Step 1: General Information</h3>
      <label for="farmId">Farm ID:</label>
      <input type="text" id="farmId" readonly />
      <label for="farmerName">Farmer Name:</label>
      <input type="text" id="farmerName" required />
      <label for="date">Date:</label>
      <input type="date" id="date" required />
      <label for="phone">Phone Number:</label>
      <input type="tel" id="phone" required />
      <label for="latitude">Latitude:</label>
      <input type="text" id="latitude" readonly required />
      <label for="longitude">Longitude:</label>
      <input type="text" id="longitude" readonly required />
      <label for="elevation">Elevation (m):</label>
      <input type="text" id="elevation" readonly />
      <button type="button" onclick="openGoogleMap()">View on Google Map</button>
      <button type="button" onclick="nextStep(1)">Next</button>
    </div>

    <div class="step" id="step2">
      <h3>Step 2: Crop Information</h3>
      <label>Crop Type:</label>
      <select id="crop" onchange="toggleOther('crop','otherCropContainer')" required>
        <option value="">-- Select --</option>
        <option>Wheat</option>
        <option>Corn</option>
        <option>Other</option>
      </select>
      <div id="otherCropContainer" style="display:none;">
        <label>Specify Other:</label>
        <input type="text" id="otherCrop" />
      </div>
      <label>Land Area (ha):</label>
      <input type="number" required />
      <button type="button" onclick="prevStep(2)">Back</button>
      <button type="button" onclick="nextStep(2)">Next</button>
    </div>

    <div class="step" id="step3">
      <h3>Step 3: Topography</h3>
      <label>Slope Value:</label>
      <input type="number" required />
      <label>Slope Unit:</label>
      <select required><option>Degrees</option><option>Percent</option></select>
      <label>Slope Direction:</label>
      <select required><option>North</option><option>South</option></select>
      <label>Landscape Position:</label>
      <select required><option>Hilltop</option><option>Valley</option></select>
      <label>Surface Form:</label>
      <select required><option>Flat</option><option>Concave</option></select>
      <button type="button" onclick="prevStep(3)">Back</button>
      <button type="button" onclick="nextStep(3)">Next</button>
    </div>

    <div class="step" id="step4">
      <h3>Step 4: Physical Soil Properties</h3>
      <label>Tillage Layer Depth (cm):</label>
      <input type="number" required />
      <label>Soil Strength:</label>
      <input type="number" required />
      <label>VESS Score:</label>
      <select required><option>Sq1</option><option>Sq2</option><option>Sq3</option></select>
      <label>Water Infiltration Time (min : sec):</label>
      <div style="display:flex; gap:5px;">
        <input type="number" min="0" max="99" required />:<input type="number" min="0" max="59" required />
      </div>
      <button type="button" onclick="prevStep(4)">Back</button>
      <button type="button" onclick="nextStep(4)">Next</button>
    </div>

    <div class="step" id="step5">
      <h3>Step 5: Chemical Soil Properties</h3>
      <label>Soil pH:</label>
      <input type="number" step="0.1" min="3" max="10" required />
      <label>Soil Color:</label>
      <select required><option>Brown</option><option>Gray</option><option>Dark Brown</option></select>
      <button type="button" onclick="prevStep(5)">Back</button>
      <button type="button" onclick="nextStep(5)">Next</button>
    </div>

    <div class="step" id="step6">
      <h3>Step 6: Biological Soil Properties</h3>
      <label>Plant Emergence Rate:</label>
      <select required><option>Low</option><option>Medium</option><option>High</option></select>
      <label>Root Development:</label>
      <select required><option>Poor</option><option>Good</option></select>
      <label>Earthworm Count (per block):</label>
      <input type="number" required />
      <label>Mycelium Development:</label>
      <select required><option>Low</option><option>High</option></select>
      <button type="button" onclick="prevStep(6)">Back</button>
      <button type="button" onclick="nextStep(6)">Next</button>
    </div>

    <div class="step" id="step7">
      <h3>Step 7: Crop Yield</h3>
      <label>Crop Type:</label>
      <select id="yieldCrop" onchange="toggleOther('yieldCrop','otherYieldCropContainer')" required>
        <option value="">-- Select --</option>
        <option>Wheat</option><option>Corn</option><option>Other</option>
      </select>
      <div id="otherYieldCropContainer" style="display:none;">
        <label>Specify Other:</label>
        <input type="text" id="otherYieldCrop" />
      </div>
      <label>Yield Value:</label>
      <input type="number" required />
      <label>Unit:</label>
      <select required><option>t/ha</option><option>kg/ha</option></select>
      <label>Note:</label>
      <textarea rows="3"></textarea>
      <button type="button" onclick="prevStep(7)">Back</button>
      <button type="submit">Submit</button>
    </div>
  </form>

  <script>
    function nextStep(current) {
      document.getElementById('step' + current).classList.remove('active');
      document.getElementById('step' + (current + 1)).classList.add('active');
      updateHeader(current + 1);
    }
    function prevStep(current) {
      document.getElementById('step' + current).classList.remove('active');
      document.getElementById('step' + (current - 1)).classList.add('active');
      updateHeader(current - 1);
    }
    function updateHeader(activeStep) {
      for (let i = 1; i <= 7; i++) {
        document.getElementById('header-step' + i).classList.remove('active');
      }
      document.getElementById('header-step' + activeStep).classList.add('active');
    }
    function toggleOther(selectId, containerId) {
      const value = document.getElementById(selectId).value;
      document.getElementById(containerId).style.display = (value === 'Other') ? 'block' : 'none';
    }
    function openGoogleMap() {
      const lat = document.getElementById("latitude").value;
      const lon = document.getElementById("longitude").value;
      window.open(`https://www.google.com/maps?q=${lat},${lon}`);
    }
    window.onload = function () {
      const now = new Date();
      const id = now.toISOString().slice(0,10).replace(/-/g, '') + '-' + Math.floor(1000 + Math.random() * 9000);
      document.getElementById("farmId").value = id;
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(pos) {
          document.getElementById("latitude").value = pos.coords.latitude.toFixed(6);
          document.getElementById("longitude").value = pos.coords.longitude.toFixed(6);
          document.getElementById("elevation").value = (100 + Math.random()*50).toFixed(2);
        });
      }
    }
  </script>
</body>
</html>
