<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>FESH - 7 Step Soil Health Assessment Form</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      padding: 20px;
    }
    .step {
      display: none;
      background: #fff;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .step.active {
      display: block;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input, select, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button {
      margin-top: 15px;
      padding: 10px 20px;
      border: none;
      background: #28a745;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h2>FESH - Field Evaluation of Soil Health</h2>
  <form id="feshForm">

    <!-- Step 1: General Info -->
    <div class="step active" id="step1">
      <h3>Step 1: General Information</h3>
      <label>Farm ID:</label>
      <input type="text" id="farmId" readonly />
      <label>Farmer Name:</label>
      <input type="text" required />
      <label>Date:</label>
      <input type="date" required />
      <label>Phone Number:</label>
      <input type="tel" required />
      <label>Latitude:</label>
      <input type="text" id="latitude" readonly required />
      <label>Longitude:</label>
      <input type="text" id="longitude" readonly required />
      <label>Elevation (m):</label>
      <input type="text" id="elevation" readonly />
      <button type="button" onclick="openGoogleMap()">View on Google Map</button><br>
      <button type="button" onclick="nextStep(1)">Next</button>
    </div>

    <!-- Step 2: Crop Info -->
    <div class="step" id="step2">
      <h3>Step 2: Crop Information</h3>
      <label>Crop Type:</label>
      <select required>
        <option>Wheat</option>
        <option>Corn</option>
        <option>Other</option>
      </select>
      <label>Specify Other (if applicable):</label>
      <input type="text" />
      <label>Land Area (ha):</label>
      <input type="number" required />
      <button type="button" onclick="prevStep(2)">Back</button>
      <button type="button" onclick="nextStep(2)">Next</button>
    </div>

    <!-- Step 3: Topography -->
    <div class="step" id="step3">
      <h3>Step 3: Topography</h3>
      <label>Slope Value:</label>
      <input type="number" required />
      <label>Slope Unit:</label>
      <select required><option>Degrees</option><option>Percent</option></select>
      <label>Slope Direction:</label>
      <select required><option>North</option><option>South</option></select>
      <label>Landscape Position:</label>
      <select required><option>Hilltop</option><option>Valley</option></select>
      <label>Surface Form:</label>
      <select required><option>Flat</option><option>Concave</option></select>
      <button type="button" onclick="prevStep(3)">Back</button>
      <button type="button" onclick="nextStep(3)">Next</button>
    </div>

    <!-- Step 4: Physical Soil -->
    <div class="step" id="step4">
      <h3>Step 4: Physical Soil Properties</h3>
      <label>Tillage Layer Depth (cm):</label>
      <input type="number" required />
      <label>Soil Strength:</label>
      <input type="number" required />
      <label>VESS Score:</label>
      <select required><option>Sq1</option><option>Sq2</option><option>Sq3</option></select>
      <label>Water Infiltration Time (min : sec):</label>
      <div style="display:flex; gap:5px;">
        <input type="number" min="0" max="99" required />:<input type="number" min="0" max="59" required />
      </div>
      <button type="button" onclick="prevStep(4)">Back</button>
      <button type="button" onclick="nextStep(4)">Next</button>
    </div>

    <!-- Step 5: Chemical Soil -->
    <div class="step" id="step5">
      <h3>Step 5: Chemical Soil Properties</h3>
      <label>Soil pH:</label>
      <input type="number" step="0.1" min="3" max="10" required />
      <label>Soil Color:</label>
      <select required><option>Brown</option><option>Gray</option><option>Dark Brown</option></select>
      <button type="button" onclick="prevStep(5)">Back</button>
      <button type="button" onclick="nextStep(5)">Next</button>
    </div>

    <!-- Step 6: Biological Soil -->
    <div class="step" id="step6">
      <h3>Step 6: Biological Soil Properties</h3>
      <label>Plant Emergence Rate:</label>
      <select required><option>Low</option><option>Medium</option><option>High</option></select>
      <label>Root Development:</label>
      <select required><option>Poor</option><option>Good</option></select>
      <label>Earthworm Count (per block):</label>
      <input type="number" required />
      <label>Mycelium Development:</label>
      <select required><option>Low</option><option>High</option></select>
      <button type="button" onclick="prevStep(6)">Back</button>
      <button type="button" onclick="nextStep(6)">Next</button>
    </div>

    <!-- Step 7: Crop Yield -->
    <div class="step" id="step7">
      <h3>Step 7: Crop Yield</h3>
      <label>Crop Type:</label>
      <select required><option>Wheat</option><option>Corn</option><option>Other</option></select>
      <label>Specify Other:</label>
      <input type="text" />
      <label>Yield Value:</label>
      <input type="number" required />
      <label>Unit:</label>
      <select required><option>t/ha</option><option>kg/ha</option></select>
      <label>Note:</label>
      <textarea rows="3"></textarea>
      <button type="button" onclick="prevStep(7)">Back</button>
      <button type="submit">Submit</button>
    </div>
  </form>

  <script>
    // Auto-generate Farm ID
    document.getElementById("farmId").value = new Date().toISOString().slice(0,10).replace(/-/g,"") + "-" + Math.floor(Math.random()*10000);

    // Navigation functions
    function nextStep(n) {
      document.getElementById("step" + n).classList.remove("active");
      document.getElementById("step" + (n + 1)).classList.add("active");
    }
    function prevStep(n) {
      document.getElementById("step" + n).classList.remove("active");
      document.getElementById("step" + (n - 1)).classList.add("active");
    }

    // Geolocation (mock elevation)
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function(pos) {
        document.getElementById("latitude").value = pos.coords.latitude.toFixed(6);
        document.getElementById("longitude").value = pos.coords.longitude.toFixed(6);
        document.getElementById("elevation").value = (50 + Math.random()*100).toFixed(2); // simulated
      });
    }

    // Google Maps button
    function openGoogleMap() {
      const lat = document.getElementById("latitude").value;
      const lon = document.getElementById("longitude").value;
      window.open(`https://www.google.com/maps?q=${lat},${lon}`);
    }
  </script>
</body>
</html>
